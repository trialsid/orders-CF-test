Topic: Data Model (D1)

Picture a grocery ledger: users own addresses, orders reference both users and address snapshots, and products provide the catalog that orders draw from.

Tables (per `migrations/*.sql`)
- users (0004, 0005, 0008): id TEXT PK; phone UNIQUE; password_hash; role CHECK('customer','rider','admin'); status default 'active'; display_name; full_name; metadata_json; token_version (default 1, added 0008); primary_address_json; created_at; updated_at.
- user_addresses (0005): id TEXT PK; user_id FK→users(id); label; contact_name; phone; line1 NOT NULL; line2; area; city; state; postal_code; landmark; is_default INTEGER; created_at; updated_at. Index on user_id. Primary snapshot persisted to users.primary_address_json when default changes.
- admin_config (0003): key TEXT PK; value TEXT; updated_at; seeded defaults (minimumOrderAmount=100, freeDeliveryThreshold=299, deliveryFeeBelowThreshold=15).
- products (0006, 0010, 0011): id TEXT PK; name NOT NULL; description; department; category; price REAL; mrp REAL; raw_selling_price REAL; is_active INTEGER; stock_quantity INTEGER NOT NULL CHECK >=0; created_at; updated_at. Indexes on category, department. Seeded ~280 SKUs in 0007 from CSV pipeline.
- orders (0001, 0002, 0005, 0011, 0012): id TEXT PK; customer_name NOT NULL; customer_phone; total_amount REAL; currency default 'INR'; status default 'pending'; items_json NOT NULL; customer_address; delivery_slot; payment_method; delivery_instructions; user_id FK→users(id); delivery_address_id FK→user_addresses(id); created_at; updated_at (0012). Indexes on created_at DESC, status, user_id, updated_at DESC.
- order_items (0009, 0011): id TEXT PK; order_id FK→orders(id) ON DELETE CASCADE; product_id; product_name snapshot; unit_price REAL; quantity; line_total REAL; created_at. Indexes on order_id, product_id.

Seeds/Defaults
- admin_config defaults inserted in 0003.
- products seeded in 0007 using `functions/_inventory-data.json` generated by `scripts/generate-inventory.mjs`.
- Stock defaulted to 1000 during 0010; enforced CHECK in 0011 recreation.
